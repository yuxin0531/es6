<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 4.数组实例的 copyWithin()
        // 数组实例的copyWithin()方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），
        // 然后返回当前数组。也就是说，使用这个方法，会修改当前数组。
        // Array.prototype.copyWithin(target, start = 0, end = this.length)
        // 它接受三个参数
        // target(必须):从该位置开始替换数据,如果为负值,表示倒数,
        // start(可选):从该位置开始读取数据,默认为0,如果为负值,表示从末尾开始计算
        // end(可选):到该位置前停止读取数据,默认等于数组长度.如果为负值,表示从末尾开计算.
        // 这三个参数都应该是数值，如果不是，会自动转为数值。
        console.log([1, 2, 3, 4, 5].copyWithin(0, 3));//[4,5,3,4,5]
        // 读取几个就替换几个,读取停止时开区间,但如果是让其默认数组长度,数组最后一个元素也会被包含进去
        // 上面代码表示将从3号位直到数组结束的成员(4和5).复制到从0号位开始的位置,结果覆盖了原来的1和2.

        // 下面是更多例子。
        //将3号位复制到0号位
        console.log([1, 2, 3, 4, 5].copyWithin(0, 3, 4));
        // [4,2,3 4,5]

        // -2相当于3号位，-1相当于4号位
        console.log([1, 2, 3, 4, 5].copyWithin(0, -2, -1));
        // [4,2,3,4,5]

        // 将3号位复制到0号位
        console.log([].copyWithin.call({length:5,3:1},0,3));
        // copyWithin不一定传入的是数组,就是帮这个方法给这个伪数组,这个伪数组为[0:undefined,1:undefined,2:undefined,3:1,4:undefined]
        // 然后从0索引开始替换,从3索引开始读取到结束
        //{0:1,3:1,length:5}

        // 将2号位到数组结束，复制到0号位
        let i32a = new Int32Array([1,2,3,4,5]);
        console.log(i32a);//Int32Array(5) [1, 2, 3, 4, 5]
        // 不懂 该 Int32Array 类型表示在平台顺序字节中一个双补码32位有符号的整型数组。如果需要控制字节顺序，请改用DataView 。
        // 此内容的初始化为0。一旦创建，你可以使用对象的方法或者标准数组索引的语法(即使用括号表示法)。
        // 参考:https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int32Array
        console.log(i32a.copyWithin(0,2));//Int32Array(5) [3, 4, 5, 4, 5]
        
        // 对于没有部署 TypedArray 的 copyWithin 方法的平台
        // 需要采用下面的写法
        console.log(new Int32Array([1,2,3,4,5]));
        //Int32Array(5) [1, 2, 3, 4, 5]
        console.log([].copyWithin.call(new Int32Array([1,2,3,4,5]),0,3,4));
        //Int32Array(5) [4, 2, 3, 4, 5]
    </script>
</body>

</html>