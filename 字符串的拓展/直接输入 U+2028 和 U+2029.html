<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 直接输入 U+2028 和 U+2029
        // JavaScript 字符串允许直接输入字符，以及输入字符的转义形式。
        // 举例来说，“中”的 Unicode 码点是 U+4e2d，你可以直接在字符串里面输入这个汉字，
        // 也可以输入它的转义形式\u4e2d，两者是等价的。
        // console.log('中' === '\u4e2d');//true
        // - U + 005C：反斜杠（reverse solidus)
        // - U + 000D：回车（carriage return ）
        // - U + 2028：行分隔符（line separator）
        // - U + 2029：段分隔符（paragraph separator）
        // - U + 000A：换行符（line feed）

        // 举例来说，字符串里面不能直接包含反斜杠，一定要转义写成\\或者\u005c。
        // 这个规定本身没有问题，麻烦在于 JSON 格式允许字符串里面直接使用 U+2028（行分隔符）和 U+2029（段分隔符）。
        // 这样一来，服务器输出的 JSON 被JSON.parse解析，就有可能直接报错。
        const json ='"\u2028"';
        JSON.parse(json);//可能报错  谷歌没有报错
        const PS =eval("'\u2029'");//Invalid or unexpected token
        // JSON 格式已经冻结（RFC 7159），没法修改了。
        // 为了消除这个报错，ES2019 允许 JavaScript 字符串直接输入 U+2028（行分隔符）和 U+2029（段分隔符）。
        // 根据这个提案，上面的代码不会报错。
        // 注意，模板字符串现在就允许直接输入这两个字符。
        // 另外，正则表达式依然不允许直接输入这两个字符，这是没有问题的，因为 JSON 本来就不允许直接包含正则表达式。
    </script>
</body>

</html>